â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ğŸ” OAUTH2 CREDENTIALS VOOR N8N AI AGENT          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  BELANGRIJK: Deze credentials zijn gegenereerd voor jouw n8n instance!
âš ï¸  Bewaar dit bestand veilig en verwijder het na gebruik!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ CLIENT INFORMATIE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Client Name:    n8n AI Agent
Client ID:      mmc_oauth2_client_n8n_prod_2024
Client Secret:  mmc_oauth2_secret_n8n_prod_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6

Redirect URIs:
  - https://mmc-n8n-instance.up.railway.app/rest/oauth2-credential/callback
  - https://mmc-n8n-instance.up.railway.app/oauth/callback
  - http://localhost:5678/rest/oauth2-credential/callback

Grants:         authorization_code, refresh_token
Scopes:         * (all MCP tools)
Created:        2024-12-04T04:40:00Z

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ N8N CONFIGURATIE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Open n8n: https://mmc-n8n-instance.up.railway.app
2. Ga naar: Credentials â†’ Add Credential
3. Zoek: "OAuth2 API" of "HTTP Request (OAuth2)"
4. Vul in:

   Credential Name:
   MMC-MCP-Bridge-OAuth2

   Grant Type:
   Authorization Code

   Authorization URL:
   https://mmcmcphttpbridge-production.up.railway.app/api/oauth/authorize

   Access Token URL:
   https://mmcmcphttpbridge-production.up.railway.app/api/oauth/token

   Client ID:
   mmc_oauth2_client_n8n_prod_2024

   Client Secret:
   mmc_oauth2_secret_n8n_prod_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6

   Scope:
   *

   Authentication:
   Body

   Auth URI Query Parameters:
   {}

5. Klik: "Connect my account"
6. Authorize in popup
7. Done! âœ…

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ SQL COMMAND (Als Railway OAuth endpoint nog niet werkt)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Voer dit uit in je Railway PostgreSQL database:

INSERT INTO oauth2_clients (
  client_id,
  client_secret,
  name,
  redirect_uris,
  grants,
  scopes
) VALUES (
  'mmc_oauth2_client_n8n_prod_2024',
  'mmc_oauth2_secret_n8n_prod_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6',
  'n8n AI Agent',
  ARRAY[
    'https://mmc-n8n-instance.up.railway.app/rest/oauth2-credential/callback',
    'https://mmc-n8n-instance.up.railway.app/oauth/callback',
    'http://localhost:5678/rest/oauth2-credential/callback'
  ],
  ARRAY['authorization_code', 'refresh_token'],
  ARRAY['*']
) ON CONFLICT (client_id) DO NOTHING;

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ§ª TEST COMMAND
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Test authorization endpoint
curl "https://mmcmcphttpbridge-production.up.railway.app/api/oauth/authorize?client_id=mmc_oauth2_client_n8n_prod_2024&redirect_uri=https://mmc-n8n-instance.up.railway.app/rest/oauth2-credential/callback&response_type=code&scope=*"

# Expected: HTML authorization page

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”„ ALTERNATIEF: BEARER TOKEN (Simpeler)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Als OAuth2 te complex is, gebruik gewoon een Bearer Token:

In n8n HTTP Request node:
  Authentication: Generic Header Auth
  Header Name: Authorization
  Header Value: Bearer mmc_prod_n8n_2024_secure_key_123

Voordeel: Simpeler, direct werkend
Nadeel: Geen automatic token refresh

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… CHECKLIST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–¡ Railway is healthy
â–¡ PostgreSQL database heeft oauth2_clients table
â–¡ SQL INSERT command uitgevoerd (of via API)
â–¡ n8n credential aangemaakt
â–¡ OAuth2 authorization succesvol
â–¡ Test API call werkt
â–¡ Credentials veilig opgeslagen
â–¡ Dit bestand verwijderd na gebruik

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‰ KLAAR!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Je n8n AI Agent kan nu communiceren met de MMC MCP Bridge! ğŸš€

Volgende stappen:
1. Test de connectie in n8n
2. Maak je eerste workflow met MCP tools
3. Integreer met OpenWebUI
4. Build amazing AI workflows! ğŸ’ª

Voor meer info: zie OAUTH2_N8N_SETUP.md

