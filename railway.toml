# Railway Configuration
# Automatic PR deployments + Branch testing

[build]
builder = "RAILPACK"
buildCommand = "npm ci && npm run build"

[deploy]
startCommand = "npm run start"
healthcheckPath = "/api/health"
healthcheckTimeout = 300
restartPolicyType = "ALWAYS"
restartPolicyMaxRetries = 10

# Environment-specific settings
[environments.production]
branch = "main"

[environments.staging]
# Auto-deploy feature branches for testing
branch = "feature/*"

# PR Deployments (automatic preview environments)
[pr]
enabled = true
# Railway will automatically:
# 1. Deploy every PR to a preview environment
# 2. Run build checks
# 3. Block merge if build fails
# 4. Clean up after PR is closed

